<Macro Common $domain>
        ServerName $domain
        ServerAdmin admin@objectobject.ca

        ErrorLog ${APACHE_LOG_DIR}/error.log
        CustomLog ${APACHE_LOG_DIR}/access.log combined

        Include /etc/letsencrypt/options-ssl-apache.conf
        SSLCertificateFile /etc/letsencrypt/live/object.gay/fullchain.pem
        SSLCertificateKeyFile /etc/letsencrypt/live/object.gay/privkey.pem
</Macro>

<VirtualHost *:443>
        Use Common www.object.gay

        Redirect permanent / https://object.gay/
</VirtualHost>

<VirtualHost *:443>
        Use Common object.gay

        ProxyPreserveHost On
        ProxyPass / http://127.0.0.1:5100
        ProxyPassReverse / http://127.0.0.1:5100
</VirtualHost>

<VirtualHost *:443>
        Use Common get.object.gay

        ProxyPreserveHost On
        ProxyPass / http://127.0.0.1:5101
        ProxyPassReverse / http://127.0.0.1:5101
</VirtualHost>
